#include <stdio.h>
#include <stdlib.h>

#include <math.h>
#define NOTE_MAX 20
#define NB_NOTES 10

float notes[NB_NOTES]={0};
float tableEcart[NB_NOTES]={0};
int nbNotes=0;

int lireEntier() {
	int entierLu;
	int nbEntiersLus;
	char videTampon;

	do {
		nbEntiersLus = scanf("%d", &entierLu);
		if (nbEntiersLus != 1) {
			printf("Erreur de format : veuillez saisir un entier.\n");

		}
		// vidage du reste du tampon (si plusieurs entiers ou saisie invalide)
		do {
			scanf("%c", &videTampon);
		} while (videTampon != '\n');
	} while (nbEntiersLus != 1);

	return(entierLu);
}

int lireEntierEntreBornes (int borneMin, int borneMax)
{
	int noteLue, temp;
	if (borneMin > borneMax) {
		temp = borneMin;
		borneMin = borneMax;
		borneMax = temp;
	}
	do {
		noteLue = lireEntier();
		if (noteLue < borneMin || noteLue > borneMax) {
			printf ("Veuillez entrer une valeur entre %d et %d \n", borneMin, borneMax);
		}
	}
	while (noteLue < borneMin || noteLue > borneMax);
	return noteLue;
}

float moy(float somme, int n)
{
    float moyenne=0;
    moyenne = somme/n;
    return moyenne;
}

float ecartCarre(float note, float moyenne)
{
    int ecart;
    ecart = note - moyenne;
    ecart = ecart*ecart;
    return ecart;
}



float ecartType (int somme, int n)
{
    int moyenneC;

    moyenneC = moy(somme, n);
    return(sqrt(moyenneC));
}


int main()
{
    int retry=3;

    do
    {
        int compteur=0; float temp=0; float somme=0; float moyenne=0; float sommeEcart=0;
        do
        {
            printf("Taper une note \t (-1) pour sortir \n");
            scanf("%f", &temp);
            notes[nbNotes] = temp;
            if (notes[nbNotes] != -1)
            {
                nbNotes++;
            }
        } while (notes[nbNotes] != -1);
        printf("Statistiques :\nnotes saisies : \t");
        for (compteur=0; compteur < nbNotes; compteur++)
        {
            printf("|%2.2f| \t", notes[compteur]);
        }
        for (compteur = 0; compteur < nbNotes; compteur++)
        {
            somme= somme+ notes[compteur];
        }
        printf("\nNombre de notes saisies : \t%d\n", nbNotes);
        moyenne = moy(somme, nbNotes);
        printf("Moyenne des note saisies : \t%2.2f\n", moyenne);

        /* ecart type*/
        for (compteur =0; compteur < nbNotes; compteur++)
        {
            tableEcart[compteur] = ecartCarre(notes[compteur], moyenne);
            sommeEcart = sommeEcart+tableEcart[compteur];
        }
        moyenne=ecartType(sommeEcart, nbNotes);
        printf("Ecart-Type entre les notes saisies : \t%2.2f\n", moyenne);
        printf("\nVoulez-vous saisir des notes supplémentaires ? \t1 pour oui, 0 pour non ... ");
        retry = lireEntierEntreBornes(0,1);
        for (compteur = 0; compteur <= nbNotes; compteur ++)
        {
            notes[compteur] = 0;
        }
        nbNotes = 0;
    } while (retry != 0);


    return 0;
}
